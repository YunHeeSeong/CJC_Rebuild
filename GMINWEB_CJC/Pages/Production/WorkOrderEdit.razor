@page "/workOrderEdit"
@page "/workOrderEdit/{loginId}"
@page "/workOrderEdit/{loginId}/{selectedWorkOrderNo}/{storeBizUnit}/{factBizUnit}"

@using GMINWEB_Rebuild.Model
@using System.Data
@using DataAccessLibrary.Model
@using DataAccessLibrary.Data

@inject ICustomerData _customerManager
@inject IWorkOrderData _workOrderManager
@inject IItemData _itemManager
@inject ICommonCodeData _codeManager
@inject IUserData _userManager
@inject IBizUnitData _bizUnitManager
@inject IWorkOrderData _db
@inject IItemData _itemManager
@inject ICommonCodeData _codeManager
@inject IJSRuntime jsRuntime
@inject Microsoft.AspNetCore.Components.NavigationManager navigationManager

<style>
    form .row {
        margin-bottom: 16px;
    }
</style>

<RadzenTemplateForm Data="workOrderModel">
    <div class="row">
        <div class="col-md">
            <RadzenFieldset Text="작업지시 내역">
                <div class="row">
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="작업지시번호" Style="color:red"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenTextBox ReadOnly="true" Placeholder="자동채번" Style="width:100%;" Name="WorkOrderNo" @bind-Value="@workOrderModel.WorkOrderNo"></RadzenTextBox>
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="작업지시일자" Style="color:red"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenDatePicker @bind-Value=@WorkOrderDt DateFormat="yyyy-MM-dd" Change="@(arg=> WorkOrderDtChanged(arg))" Class="w-100" />
                    </div>
                </div>
                <div class="row">
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="주문번호" Style="color:red"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenTextBox ReadOnly="true" Placeholder="자동채번" Style="width:100%;" Name="OrderNo" @bind-Value="@workOrderModel.OrderNo"></RadzenTextBox>

                    </div>
                    <div class="col-sm-2"></div>
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="생산계획번호"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenTextBox ReadOnly="true" Placeholder="자동채번" Style="width:100%;" Name="WorkPlanNo" @bind-Value="@workOrderModel.WorkPlanNo"></RadzenTextBox>
                    </div>
                </div>
                <div class="row">
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="품목코드"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenTextBox Style="width:100%;" Name="ItemNm" @bind-Value="@workOrderModel.ItemCd" Disabled="true"></RadzenTextBox>

                    </div>
                    <div class="col-sm-2"></div>
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="품목명"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenTextBox Style="width:100%;" Name="ItemNm" @bind-Value="@itemModel.ItemNm" Disabled="true"></RadzenTextBox>

                    </div>
                </div>
                <div class="row">
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="수량"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenNumeric TValue="decimal" Name="Qty" @bind-Value="@workOrderModel.Qty" Disabled="isDisable"></RadzenNumeric>
                    </div>
                    <!--<div class="align-items-center d-flex col-md-3">
                <RadzenLabel Text="BOM코드"></RadzenLabel>
            </div>
            <div class="col-md-3">-->
                    @* !!!!!!!! TODO : bom 등록 완성 시 품목코드로 BOM 코드 가져오는 코드헬프 제작해야함 !!!!!!!!*@
                    @*<RadzenDropDown AllowClear="true" TValue="string" AllowVirtualization="true" Class="w-100" @bind-Value="@workOrderModel.BomCd"
                AllowFiltering="true" Data=@BomCdList TextProperty="BomCd" ValueProperty="BomCd"
                Change=@(args => OnChangeBomCd(args, "DropDown with virtualization")) />*@
                    <!--</div>-->
                </div>
                <div class="row">
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="선적일"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenDatePicker @bind-Value=@ShipDt DateFormat="yyyy-MM-dd" Change="@(arg=> ShipDtChanged(arg))" Class="w-100" />
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="align-items-center d-flex col-md-1">
                        <RadzenLabel Text="생산완료예정일"></RadzenLabel>
                    </div>
                    <div class="col-md-3">
                        <RadzenDatePicker @bind-Value=@ProdDueDt DateFormat="yyyy-MM-dd" Change="@(arg=> ProdDueDtChanged(arg))" Class="w-100" />
                    </div>
                </div>
                @*<div class="row">
                <div class="col-sm-3 align-items-center d-flex">
                    <RadzenLabel Text="작업상태"></RadzenLabel>
                </div>
                <div class="col-sm-3">
                    <RadzenDropDown AllowClear="true" TValue="int" AllowVirtualization="true" Class="w-100"
                                    AllowFiltering="true" Data=@workStateList TextProperty="CodeSubNm" ValueProperty="CodeSeq" @bind-Value="workOrderModel.WorkState"
                                    Change=@(args => OnChangeWorkState(args, "작업상태")) />
                </div>
            </div>*@
            </RadzenFieldset>
            <RadzenFieldset Text="주문 상세">
                <div class="row">
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="품목구분" Style="color: red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenDropDown AllowClear="true" TValue="int" AllowVirtualization="true" Class="w-100" @bind-Value="@itemModel.ItemCls"
                                        AllowFiltering="true" Data=@itemClsList TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="대분류" Style="color: red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenDropDown AllowClear="true" TValue="int" AllowVirtualization="true" Class="w-100" @bind-Value="@itemModel.Item1Cls"
                                        AllowFiltering="true" Data=@item1ClsList TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="중분류" Style="color: red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenDropDown AllowClear="true" TValue="int" AllowVirtualization="true" Class="w-100" @bind-Value="@itemModel.Item2Cls"
                                        AllowFiltering="true" Data=@item2ClsList TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="소분류" Style="color: red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenDropDown AllowClear="true" TValue="int" AllowVirtualization="true" Class="w-100" @bind-Value="@itemModel.Item3Cls"
                                        AllowFiltering="true" Data=@item3ClsList TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="제작방식" Style="color:red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenRadioButtonList @bind-Value=@itemModel.MadeType TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                               Disabled="true" Data="@madeTypeList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" />
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="col-sm-1 align-items-center d-flex">
                        <RadzenLabel Text="생산사업장" Style="color:red"></RadzenLabel>
                    </div>
                    <div class="col-sm-3">
                        <RadzenDropDown AllowClear="true" TValue="string" AllowVirtualization="true" Class="w-100" @bind-Value="@itemModel.FactBizUnit"
                                        AllowFiltering="true" Data=@factBizUnitList TextProperty="BizNm" ValueProperty="BizUnit" Disabled="true" />
                    </div>
                </div>
            </RadzenFieldset>
            @*핸드메이드*@
            @if (itemModel.MadeType == 1)
            {
                <RadzenFieldset Text="품목 상세 정보">
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="종류" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.ModelType TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@modelTypeList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="부착방식" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.AttachType TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@attachTypeList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="부착수량" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" Name="AttachQty" @bind-Value="@handMdItemModel.AttachQty" Disabled="true"></RadzenNumeric>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="제품 사이즈 가로" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" Name="ItemWidth" @bind-Value="@handMdItemModel.ItemWidth" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="제품 사이즈 세로" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" Name="ItemHeight" @bind-Value="@handMdItemModel.ItemHeight" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="모방향" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.HairDirection TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@hairDirectioneList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="모발종류" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="중국모"></RadzenLabel>
                            <RadzenNumeric TValue="decimal" Name="FiberTypeCN" @bind-Value="@handMdItemModel.FiberTypeCN" Style="width:100px" Disabled="true"></RadzenNumeric>
                            <RadzenLabel Text="%"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="인도모"></RadzenLabel>
                            <RadzenNumeric TValue="decimal" Name="FiberTypeIN" @bind-Value="@handMdItemModel.FiberTypeIN" Style="width:100px" Disabled="true"></RadzenNumeric>
                            <RadzenLabel Text="%"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="STN"></RadzenLabel>
                            <RadzenNumeric TValue="decimal" Name="FiberTypeSTN" @bind-Value="@handMdItemModel.FiberTypeSTN" Style="width:100px" Disabled="true"></RadzenNumeric>
                            <RadzenLabel Text="%"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="고열사"></RadzenLabel>
                            <RadzenNumeric TValue="decimal" Name="FiberTypeH" @bind-Value="@handMdItemModel.FiberTypeH" Style="width:100px" Disabled="true"></RadzenNumeric>
                            <RadzenLabel Text="%"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="기타"></RadzenLabel>
                            <RadzenNumeric TValue="decimal" Name="FiberTypeEtc" @bind-Value="@handMdItemModel.FiberTypeEtc" Style="width:100px" Disabled="true"></RadzenNumeric>
                            <RadzenLabel Text="%"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="모발색상" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.HairColor TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@hairColorList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row" style="margin-top:40px">
                        <div class="col-sm-1 align-items-center d-flex"></div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="앞(F)" Style="text-align:center"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="중앙(T)" Style="text-align:center"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="귀(TP)" Style="text-align:center"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="옆(S)" Style="text-align:center"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="뒤(B)" Style="text-align:center"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-1 align-items-center d-flex">
                            <RadzenLabel Text="식모방법"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenTextBox TValue="string" Name="HairColorFront" @bind-Value="@handMdItemModel.HairColorFront" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenTextBox TValue="string" Name="HairColorCenter" @bind-Value="@handMdItemModel.HairColorCenter" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenTextBox TValue="string" Name="HairColorEar" @bind-Value="@handMdItemModel.HairColorEar" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenTextBox TValue="string" Name="HairColorSide" @bind-Value="@handMdItemModel.HairColorSide" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenTextBox TValue="string" Name="HairColorBack" @bind-Value="@handMdItemModel.HairColorBack" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-1 align-items-center d-flex">
                            <RadzenLabel Text="모발길이"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.HairLengthFornt" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.HairLengthCenter" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.HairLengthEar" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.HairLengthSide" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.HairLengthBack" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-1 align-items-center d-flex">
                            <RadzenLabel Text="백모량"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.WHairAmountFront" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.WHairAmountCenter" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.WHairAmountEar" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.WHairAmountSide" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.WHairAmountBack" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-1 align-items-center d-flex">
                            <RadzenLabel Text="모발컬"></RadzenLabel>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.CurlFront" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.CurlCenter" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.CurlEar" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.CurlSide" Disabled="true"></RadzenNumeric>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenNumeric TValue="decimal" @bind-Value="@handMdItemModel.CurlBack" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row" style="margin-top:40px">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="앞라인 너팅"></RadzenLabel>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.FrontKnotting TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@frontKnottingList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="망" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.BaseNet TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@baseNetList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="앞" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.Front TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@frontList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="나노스킨두께" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-ValuNe=@handMdItemModel.NanoSkinThin TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@nanoSkinThinList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="나노스킨코팅" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.NanoSkinCoating TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@nanoSkinCoatingList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="스킨색상" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.SkinColor TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@skinColorList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="가르마,크라운" Style="color:red"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenRadioButtonList @bind-Value=@handMdItemModel.PartCrown TValue="int" Orientation="Radzen.Orientation.Horizontal"
                                                   Data="@partCrownList" TextProperty="CodeSubNm" ValueProperty="CodeSeq" Disabled="true" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="지시사항"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 align-items-center d-flex">
                            <RadzenTextArea @bind-Value="@handMdItemModel.WorkOrderContent" Class="w-100" Disabled="true" />

                        </div>
                    </div>
                </RadzenFieldset>
                @*<RadzenFieldset Text="이미지 등록">
                <div class="row">
                    <div class="col-sm-3 align-items-center d-flex">
                        <RadzenLabel Text="작업이미지"></RadzenLabel>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 align-items-center d-flex">
                        <RadzenFileInput @bind-Value="itemImgModel.ImageData" TValue="string" Class="w-100" ChooseText="이미지 선택" Disabled="true" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6">
                        <RadzenImage Path="@itemImgModel.ImageData" Style="width: 100%;">
                        </RadzenImage>
                    </div>
                </div>
            </RadzenFieldset>*@
            }
            //머신메이드
            else if (itemModel.MadeType == 2)
            {
                <RadzenFieldset Text="품목 상세 정보">
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="BUYER"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.Buyer" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="FIBER"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.Fiber" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="종류"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.MachineType" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="중량"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenNumeric TValue="decimal" style="width: 100%;" @bind-Value="@machineMdItemMaster.Weight" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="제조일자"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenDatePicker @bind-Value=@manufactedDt DateFormat="yyyy-MM-dd" Change="@(arg=> ManufactedDtChanged(arg))" Class="w-100" Disabled="true" />
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            <RadzenLabel Text="모장"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.HairLength" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row"></div>

                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex"></div>
                        <div class="col-sm-5 align-items-center d-flex">
                            <RadzenLabel Text="공급" Style="font-weight:bold"></RadzenLabel>
                        </div>
                        <div class="col-sm-5 align-items-center d-flex">
                            <RadzenLabel Text="중량" Style="font-weight:bold"></RadzenLabel>
                        </div>
                    </div>
                    <div class="row"></div>

                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            @*공급-고침*@
                            <RadzenLabel Text="고침"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.GongGo" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            @*중량-수제*@
                            <RadzenLabel Text="수제"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.WeightHand" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            @*공급-인수*@
                            <RadzenLabel Text="인수"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" Placeholder="GR" style="width: 100%;" @bind-Value="@machineMdItemMaster.GongInsoo" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            @*중량-인수*@
                            <RadzenLabel Text="인수"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" Placeholder="GR" style="width: 100%;" @bind-Value="@machineMdItemMaster.WeightInsoo" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex">
                            @*공급-인계*@
                            <RadzenLabel Text="인계"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" Placeholder="GR" style="width: 100%;" @bind-Value="@machineMdItemMaster.GongIngye" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-3 align-items-center d-flex">
                            @*중량-인계*@
                            <RadzenLabel Text="인계"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" Placeholder="GR" style="width: 100%;" @bind-Value="@machineMdItemMaster.WeightIngye" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3 align-items-center d-flex"></div>
                        <div class="col-sm-3"></div>
                        <div class="col-sm-3 align-items-center d-flex">
                            @*중량-모장*@
                            <RadzenLabel Text="모장"></RadzenLabel>
                        </div>
                        <div class="col-sm-3">
                            <RadzenTextBox TValue="string" Placeholder="GR" style="width: 100%;" @bind-Value="@machineMdItemMaster.WeightLength" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row"></div>

                    <div class="row">
                        <div class="col-sm-5 align-items-center d-flex"></div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP" Style="font-weight:bold"></RadzenLabel>
                        </div>
                        <div class="col-sm-5 align-items-center d-flex"></div>
                    </div>
                    <div class="row"></div>

                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP-중량"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.CapWeight" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP-둘레"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.CapRound" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP-길이"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.CapLength" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP-앞뒤"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.CapFrontBack" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="CAP-자재"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.CapPartItem" Disabled="true"></RadzenTextBox>
                        </div>
                    </div>
                    <div class="row"></div>
                    <div class="row">
                        <div class="col-sm-5 align-items-center d-flex"></div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="SKIN PART" Style="font-weight:bold"></RadzenLabel>
                        </div>
                        <div class="col-sm-5 align-items-center d-flex"></div>
                    </div>
                    <div class="row"></div>
                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="PART모"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.PartHair" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="PART규격"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.PartSize" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="SKIN중량"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenNumeric TValue="decimal" style="width: 100%;" @bind-Value="@machineMdItemMaster.SkinWeight" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="LOSS"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemMaster.Loss" Disabled="true"></RadzenTextBox>
                        </div>
                        <div class="col-sm-2 align-items-center d-flex">
                            <RadzenLabel Text="완성중량"></RadzenLabel>
                        </div>
                        <div class="col-sm-2">
                            <RadzenNumeric TValue="decimal" style="width: 100%;" @bind-Value="@machineMdItemMaster.TotalWeight" Disabled="true"></RadzenNumeric>
                        </div>
                    </div>
                </RadzenFieldset>
                //머신메이드 상세 정보 그리드
                <RadzenFieldset Text="머신메이드 상세 정보">
                    <RadzenDataGrid @ref="detailGrid" AllowFiltering="false" AllowPaging="true" PageSize="5" AllowSorting="true" EditMode="Radzen.DataGridEditMode.Single"
                                    Data="@machineMdItemModels" TItem="MachineMdItemModel" EmptyText="">
                        <Columns>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="ItemCd" Title="품목코드" Width="70px" Visible="false" />
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="Seq" Title="순번" Width="70px" CssClass="data_center" />
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="Size" Title="호수" Width="70px" CssClass="data_center">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenNumeric TValue="int" @bind-Value="machineMdItemDetail.Size"></RadzenNumeric>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="StretchCut" Title="정모-재단" Width="120px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.StretchCut"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="StretchYN" Title="정모-정모" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.StretchYN"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="StretchWeight" Title="정모-중량" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.StretchWeight"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="TwinHairLength" Title="쌍침-모장" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.TwinHairLength"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="TwinHand" Title="쌍침-자수" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.TwinHand"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="TwinCut" Title="쌍침-CUT길이및결수" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.TwinCut"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="CurlPipe" Title="컬-파이프" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.CurlPipe"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="CurlDirection" Title="컬-방향" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.CurlDirection"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="CurlSpecial" Title="컬-특수컬" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.CurlSpecial"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="CurlRemk" Title="컬-비고" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.CurlRemk"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn TItem="MachineMdItemModel" Property="CurlThickness" Title="컬-두께" Width="150px">
                                <EditTemplate Context="machineMdItemDetail">
                                    <RadzenTextBox TValue="string" style="width: 100%;" @bind-Value="@machineMdItemDetail.CurlThickness"></RadzenTextBox>
                                </EditTemplate>
                            </RadzenDataGridColumn>
                        </Columns>
                    </RadzenDataGrid>
                </RadzenFieldset>
                @*<RadzenFieldset Text="이미지 등록">
                <div class="row">
                    <div class="col-sm-3 align-items-center d-flex">
                        <RadzenLabel Text="작업이미지"></RadzenLabel>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 align-items-center d-flex">
                        <RadzenFileInput @bind-Value="itemImgModel.ImageData" TValue="string" Class="w-100" ChooseText="이미지 선택" Disabled="true" />
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6">
                        <RadzenImage Path="@itemImgModel.ImageData" Style="width: 100%;">
                        </RadzenImage>
                    </div>
                </div>
            </RadzenFieldset>*@
            }
            else if (itemModel.MadeType == 3)
            {

            }
        </div>
    </div>

    <div>
        <RadzenButton style="margin: 0 1rem 1rem 500px" ButtonStyle="ButtonStyle.Light" Click="btnCancleClick">취소</RadzenButton>
        <RadzenButton style="margin: 0 1rem 1rem 0" ButtonStyle="ButtonStyle.Secondary" Click="btnSaveClick">저장</RadzenButton>
    </div>

</RadzenTemplateForm>


@code {

    [Parameter] public string selectedWorkOrderNo { get; set; }
    [Parameter] public string storeBizUnit { get; set; }
    [Parameter] public string factBizUnit { get; set; }

    [Parameter] public string loginId { get; set; }

    //기타아이템모델추가
    private EtcItemModel etcItemModel = new EtcItemModel();

    public GMINWEB_Rebuild.Pages.Common.ConfirmBase DeleteConfirmation { get; set; }

    private PDItemImgModel itemImgModel = new PDItemImgModel();
    private WorkOrderModel workOrderModel = new WorkOrderModel();
    private HandMdItemModel handMdItemModel = new HandMdItemModel();
    private MachineMdItemModel machineMdItemMaster = new MachineMdItemModel();
    private MachineMdItemModel machineMdItemDetail = new MachineMdItemModel();
    private ItemModel itemModel = new ItemModel();

    private List<MachineMdItemModel> machineMdItemModels;

    RadzenDataGrid<MachineMdItemModel> detailGrid;

    List<CommonCodeModel> workStateList;
    //List<ItemModel> ItemCdList;

    List<UserModel> userlist;
    List<CustomerModel> customerList;

    List<BizUnitModel> factBizUnitList;


    List<CommonCodeModel> itemClsList;
    List<CommonCodeModel> item1ClsList;
    List<CommonCodeModel> item2ClsList;
    List<CommonCodeModel> item3ClsList;
    List<CommonCodeModel> modelTypeList;
    List<CommonCodeModel> attachTypeList;
    List<CommonCodeModel> hairDirectioneList;
    List<CommonCodeModel> hairColorList;
    List<CommonCodeModel> frontKnottingList;
    List<CommonCodeModel> baseNetList;
    List<CommonCodeModel> frontList;
    List<CommonCodeModel> nanoSkinThinList;
    List<CommonCodeModel> nanoSkinCoatingList;
    List<CommonCodeModel> skinColorList;
    List<CommonCodeModel> partCrownList;
    List<CommonCodeModel> madeTypeList;

    DateTime WorkOrderDt;
    DateTime ShipDt;
    DateTime ProdDueDt;
    DateTime manufactedDt;      //머신메이드-제조일자

    bool isDisable;

    private OrderModel selectedOrderModel = new OrderModel();

    protected override async Task OnInitializedAsync()
    {
        if (selectedWorkOrderNo is not null)
        {
            var workOrderList = await _db.GetWorkOrder(loginId, selectedWorkOrderNo,storeBizUnit, factBizUnit);
            workOrderModel = workOrderList.FirstOrDefault();

            //신규등록이 아닐경우 특정 컬럼 수정 불가
            isDisable = true;

            var itemList = await _itemManager.GetPDItem(loginId, workOrderModel.BizUnit, workOrderModel.FactBizUnit, workOrderModel.ItemCd);
            itemModel = itemList.FirstOrDefault();

            //var pdItemImgList = await _itemManager.GetPDItemImg(loginId, itemModel);
            //if (pdItemImgList.Count > 0)
            //{
            //    itemImgModel = pdItemImgList.FirstOrDefault();
            //}

            //핸드메이드일 경우
            if (itemModel.MadeType == 1)
            {
                var handMdItemList = await _itemManager.GetHandMdItem(loginId, workOrderModel.BizUnit, workOrderModel.FactBizUnit, workOrderModel.ItemCd);
                handMdItemModel = handMdItemList.FirstOrDefault();
            }
            //머신메이드일 경우
            else if (itemModel.MadeType == 2)
            {
                //머신메이드 마스터 조회
                var machineMdItemList = await _itemManager.GetMachineMdItemMaster(loginId, workOrderModel.BizUnit, workOrderModel.FactBizUnit, workOrderModel.ItemCd);
                machineMdItemMaster = machineMdItemList.FirstOrDefault();

                if (machineMdItemMaster.ManufactedDt.GetNullToEmpty() != string.Empty)
                {
                    manufactedDt = Convert.ToDateTime(machineMdItemMaster.ManufactedDt);
                }

                //머신메이드 상세 조회
                machineMdItemModels = await _itemManager.GetMachineMdItemDetail(loginId, workOrderModel.BizUnit, workOrderModel.FactBizUnit, workOrderModel.ItemCd);
            }
            //기타일 경우
            else if (itemModel.MadeType == 3)
            {
                var etcItemList = await _itemManager.GetEtcItem(loginId, workOrderModel.BizUnit, workOrderModel.FactBizUnit, workOrderModel.ItemCd);
                etcItemModel = etcItemList.FirstOrDefault();
            }
        }
        else
        {
            //신규등록일 경우 모든 컬럼 활성화
            isDisable = false;
        }
        //날짜컬럼들 형변환 처리
        SetDateTimeConvert(workOrderModel);

        //ItemCdList = await _itemManager.GetAllItem(loginId);
        customerList = await _customerManager.GetAllCustomers(loginId);
        userlist = await _userManager.GetUserFromCodehelp(loginId);
        factBizUnitList = await _bizUnitManager.GetFactoryBizUnit(loginId);
        itemClsList = await _codeManager.FindCommonCodeFromName("품목구분", loginId);
        item1ClsList = await _codeManager.FindCommonCodeFromName("품목대분류", loginId);
        item2ClsList = await _codeManager.FindCommonCodeFromName("품목중분류", loginId);
        item3ClsList = await _codeManager.FindCommonCodeFromName("품목소분류", loginId);
        modelTypeList = await _codeManager.FindCommonCodeFromName("종류", loginId);
        attachTypeList = await _codeManager.FindCommonCodeFromName("부착방식", loginId);
        hairDirectioneList = await _codeManager.FindCommonCodeFromName("모방향", loginId);
        frontKnottingList = await _codeManager.FindCommonCodeFromName("앞라인넛팅", loginId);
        baseNetList = await _codeManager.FindCommonCodeFromName("망", loginId);
        frontList = await _codeManager.FindCommonCodeFromName("앞", loginId);
        nanoSkinThinList = await _codeManager.FindCommonCodeFromName("나노스킨두께", loginId);
        nanoSkinCoatingList = await _codeManager.FindCommonCodeFromName("나노스킨코팅", loginId);
        skinColorList = await _codeManager.FindCommonCodeFromName("스킨색상", loginId);
        partCrownList = await _codeManager.FindCommonCodeFromName("가르마,크라운", loginId);
        workStateList = await _codeManager.FindCommonCodeFromName("작업상태", loginId);
        madeTypeList = await _codeManager.FindCommonCodeFromName("제작형태", loginId);
        hairColorList = await _codeManager.FindCommonCodeFromName("모발색상", loginId);

    }

    void btnCancleClick()
    {
        navigationManager.NavigateTo("/WorkOrderManagement");
    }

    async Task btnSaveClick()
    {
        //필수값 체크
        if (ValidationWorkOrder(workOrderModel) == true)
        {
            //신규일때
            if (workOrderModel.WorkOrderNo.GetNullToEmpty() == string.Empty)
            {
                //await _db.(workOrderModel, loginId);
            }
            else
            {
                await _db.UpdateWorkOrder(loginId, workOrderModel);
            }

            navigationManager.NavigateTo("/WorkOrderManagement");

        }
        else
        {
            await jsRuntime.InvokeVoidAsync("alert", "지시일자와 품목코드, 수량을 입력하여 주세요.");
        }

    }


    bool ValidationWorkOrder(WorkOrderModel workOrderModel)
    {
        ////필수값 미입력시 false 반환
        if (workOrderModel.WorkOrderDt.GetNullToEmpty() == string.Empty || workOrderModel.ItemCd.GetNullToEmpty() == string.Empty || workOrderModel.Qty.GetDecimalNullToZero() == 0)
        {
            return false;
        }
        else
        {
            return true;
        }
    }

    void WorkOrderDtChanged(object value)
    {
        if (value is not null)
        {
            workOrderModel.WorkOrderDt = Convert.ToDateTime(value).ToString("yyyy-MM-dd");
        }
    }
    void ManufactedDtChanged(DateTime? value)
    {
        if (value is not null)
        {
            machineMdItemMaster.ManufactedDt = ((DateTime)value).ToString("yyyy-MM-dd");
        }
    }
    void ShipDtChanged(object value)
    {
        if (value is not null)
        {
            workOrderModel.ShipDt = Convert.ToDateTime(value).ToString("yyyy-MM-dd");
        }
    }
    void ProdDueDtChanged(object value)
    {
        if (value is not null)
        {
            workOrderModel.ProdDueDt = Convert.ToDateTime(value).ToString("yyyy-MM-dd");
        }
    }
    void OnChangeWorkState(object value, string name)
    {
        workOrderModel.WorkState = (int)value;
    }

    void SetDateTimeConvert(WorkOrderModel workOrderModel)
    {
        if (workOrderModel.WorkOrderDt.GetNullToEmpty() == string.Empty)
        {
            WorkOrderDt = DateTime.Today;
            workOrderModel.WorkOrderDt = Convert.ToDateTime(WorkOrderDt).ToString("yyyy-MM-dd");
        }
        else
        {
            WorkOrderDt = Convert.ToDateTime(workOrderModel.WorkOrderDt);
        }

        if (workOrderModel.ShipDt.GetNullToEmpty() == string.Empty)
        {
            ShipDt = DateTime.Today;
            workOrderModel.ShipDt = Convert.ToDateTime(ShipDt).ToString("yyyy-MM-dd");
        }
        else
        {
            ShipDt = Convert.ToDateTime(workOrderModel.ShipDt);
        }

        if (workOrderModel.ProdDueDt.GetNullToEmpty() == string.Empty)
        {
            ProdDueDt = DateTime.Today;
            workOrderModel.ProdDueDt = Convert.ToDateTime(ProdDueDt).ToString("yyyy-MM-dd");
        }
        else
        {
            ProdDueDt = Convert.ToDateTime(workOrderModel.ProdDueDt);
        }
    }

    public async Task GetWorkPlan()
    {
        //var parameters = new ModalParameters();
        //parameters.Add(nameof(DialogPOrderList.POInCustCd), masterModel.POInCustCd);
        //parameters.Add("loginId", loginId);

        //var groupEdit = Modal.Show<DialogPOrderList>("발주서 선택", parameters);
        //var result = await groupEdit.Result;

        //if (!result.Cancelled)
        //{
        //    if (DialogPOrderList.selectedPOrder is not null)
        //    {
        //        var selectedPOrder = DialogPOrderList.selectedPOrder;
        //        pOInItemToInsert.POrderNo = selectedPOrder.POrderNo;
        //        pOInItemToInsert.POSeq = selectedPOrder.Seq;
        //        pOInItemToInsert.ItemCd = selectedPOrder.ItemCd;
        //        pOInItemToInsert.ItemNm = selectedPOrder.ItemNm;
        //        pOInItemToInsert.Price = selectedPOrder.Prsice;
        //        pOInItemToInsert.Unit = selectedPOrder.UnitCd;
        //        pOInItemToInsert.Weight = selectedPOrder.Weight;
        //    }

        //}
    }
}
